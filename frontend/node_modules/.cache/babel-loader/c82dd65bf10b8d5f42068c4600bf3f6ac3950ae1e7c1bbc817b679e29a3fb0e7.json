{"ast":null,"code":"/*\n * Copyright 2024 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useCallback } from \"react\";\nimport { useSyncExternalStore } from \"use-sync-external-store/shim\";\nimport { Classes } from \"../../common\";\nconst globalStack = [];\nconst globalStackListeners = [];\n/**\n * Modify the global stack in-place and notify all listeners of the updated value.\n *\n * @public for testing\n */\nexport const modifyGlobalStack = fn => {\n  fn(globalStack);\n  globalStackListeners.forEach(listener => listener());\n};\nconst legacyGlobalOverlayStackStore = {\n  getSnapshot: () => globalStack,\n  subscribe: listener => {\n    globalStackListeners.push(listener);\n    return () => {\n      const index = globalStackListeners.indexOf(listener);\n      globalStackListeners.splice(index, 1);\n    };\n  }\n};\n/**\n * Legacy implementation of a global overlay stack which maintains state in a global variable.\n * This is used for backwards-compatibility with overlay-based components in Blueprint v5.\n * It will be removed in Blueprint v6 once `<OverlaysProvider>` is required.\n *\n * @see https://github.com/palantir/blueprint/wiki/Overlay2-migration\n */\nexport function useLegacyOverlayStack() {\n  const stack = useSyncExternalStore(legacyGlobalOverlayStackStore.subscribe, legacyGlobalOverlayStackStore.getSnapshot,\n  // server snapshot is the same as client snapshot\n  legacyGlobalOverlayStackStore.getSnapshot);\n  const getLastOpened = useCallback(() => stack[stack.length - 1], [stack]);\n  const getThisOverlayAndDescendants = useCallback(id => {\n    const stackIndex = stack.findIndex(o => o.id === id);\n    return stack.slice(stackIndex);\n  }, [stack]);\n  const resetStack = useCallback(() => {\n    modifyGlobalStack(s => s.splice(0, s.length));\n  }, []);\n  const openOverlay = useCallback(overlay => {\n    globalStack.push(overlay);\n    if (overlay.props.usePortal && overlay.props.hasBackdrop) {\n      // add a class to the body to prevent scrolling of content below the overlay\n      document.body.classList.add(Classes.OVERLAY_OPEN);\n    }\n  }, []);\n  const closeOverlay = useCallback(id => {\n    const otherOverlaysWithBackdrop = stack.filter(o => o.props.usePortal && o.props.hasBackdrop && o.id !== id);\n    const index = globalStack.findIndex(o => o.id === id);\n    if (index > -1) {\n      globalStack.splice(index, 1);\n    }\n    if (otherOverlaysWithBackdrop.length === 0) {\n      // remove body class which prevents scrolling of content below overlay\n      document.body.classList.remove(Classes.OVERLAY_OPEN);\n    }\n  }, [stack]);\n  return {\n    closeOverlay,\n    getLastOpened,\n    getThisOverlayAndDescendants,\n    openOverlay,\n    resetStack\n  };\n}","map":{"version":3,"names":["useCallback","useSyncExternalStore","Classes","globalStack","globalStackListeners","modifyGlobalStack","fn","forEach","listener","legacyGlobalOverlayStackStore","getSnapshot","subscribe","push","index","indexOf","splice","useLegacyOverlayStack","stack","getLastOpened","length","getThisOverlayAndDescendants","id","stackIndex","findIndex","o","slice","resetStack","s","openOverlay","overlay","props","usePortal","hasBackdrop","document","body","classList","add","OVERLAY_OPEN","closeOverlay","otherOverlaysWithBackdrop","filter","remove"],"sources":["/Users/husseingalal/Desktop/Hackathon/Elrond/frontend/node_modules/@blueprintjs/core/src/hooks/overlays/useLegacyOverlayStack.ts"],"sourcesContent":["/*\n * Copyright 2024 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback } from \"react\";\nimport { useSyncExternalStore } from \"use-sync-external-store/shim\";\n\nimport { Classes } from \"../../common\";\nimport type { OverlayInstance } from \"../../components\";\n\nimport type { UseOverlayStackReturnValue } from \"./useOverlayStack\";\n\nconst globalStack: OverlayInstance[] = [];\nconst globalStackListeners: Array<() => void> = [];\n\n/**\n * Modify the global stack in-place and notify all listeners of the updated value.\n *\n * @public for testing\n */\nexport const modifyGlobalStack = (fn: (stack: OverlayInstance[]) => void) => {\n    fn(globalStack);\n    globalStackListeners.forEach(listener => listener());\n};\n\nconst legacyGlobalOverlayStackStore = {\n    getSnapshot: () => globalStack,\n    subscribe: (listener: () => void) => {\n        globalStackListeners.push(listener);\n        return () => {\n            const index = globalStackListeners.indexOf(listener);\n            globalStackListeners.splice(index, 1);\n        };\n    },\n};\n\n/**\n * Legacy implementation of a global overlay stack which maintains state in a global variable.\n * This is used for backwards-compatibility with overlay-based components in Blueprint v5.\n * It will be removed in Blueprint v6 once `<OverlaysProvider>` is required.\n *\n * @see https://github.com/palantir/blueprint/wiki/Overlay2-migration\n */\nexport function useLegacyOverlayStack(): UseOverlayStackReturnValue {\n    const stack = useSyncExternalStore(\n        legacyGlobalOverlayStackStore.subscribe,\n        legacyGlobalOverlayStackStore.getSnapshot,\n        // server snapshot is the same as client snapshot\n        legacyGlobalOverlayStackStore.getSnapshot,\n    );\n\n    const getLastOpened = useCallback(() => stack[stack.length - 1], [stack]);\n\n    const getThisOverlayAndDescendants = useCallback(\n        (id: string) => {\n            const stackIndex = stack.findIndex(o => o.id === id);\n            return stack.slice(stackIndex);\n        },\n        [stack],\n    );\n\n    const resetStack = useCallback(() => {\n        modifyGlobalStack(s => s.splice(0, s.length));\n    }, []);\n\n    const openOverlay = useCallback((overlay: OverlayInstance) => {\n        globalStack.push(overlay);\n        if (overlay.props.usePortal && overlay.props.hasBackdrop) {\n            // add a class to the body to prevent scrolling of content below the overlay\n            document.body.classList.add(Classes.OVERLAY_OPEN);\n        }\n    }, []);\n\n    const closeOverlay = useCallback(\n        (id: string) => {\n            const otherOverlaysWithBackdrop = stack.filter(\n                o => o.props.usePortal && o.props.hasBackdrop && o.id !== id,\n            );\n\n            const index = globalStack.findIndex(o => o.id === id);\n            if (index > -1) {\n                globalStack.splice(index, 1);\n            }\n\n            if (otherOverlaysWithBackdrop.length === 0) {\n                // remove body class which prevents scrolling of content below overlay\n                document.body.classList.remove(Classes.OVERLAY_OPEN);\n            }\n        },\n        [stack],\n    );\n\n    return {\n        closeOverlay,\n        getLastOpened,\n        getThisOverlayAndDescendants,\n        openOverlay,\n        resetStack,\n    };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}